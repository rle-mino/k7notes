---
phase: 02-core-note-taking
plan: 05
type: execute
wave: 3
depends_on: ["02-02"]
files_modified:
  - apps/mobile/app/(app)/notes/index.tsx
  - apps/mobile/app/(app)/notes/[id].tsx
  - apps/mobile/app/(app)/notes/folder/[id].tsx
  - apps/mobile/app/(app)/notes/new.tsx
  - apps/mobile/app/(app)/_layout.tsx
  - apps/mobile/src/components/notes/NoteCard.tsx
  - apps/mobile/src/components/notes/FolderCard.tsx
  - apps/mobile/src/components/notes/EmptyState.tsx
  - apps/mobile/src/components/notes/index.ts
autonomous: true

must_haves:
  truths:
    - "User sees list of notes and folders at root level"
    - "User can tap folder to navigate into it"
    - "User can tap note to open editor"
    - "User can create new note from FAB"
    - "User can create new folder"
    - "Breadcrumb shows current folder path"
    - "List updates automatically when data changes"
  artifacts:
    - path: "apps/mobile/app/(app)/notes/index.tsx"
      provides: "Root note list screen"
    - path: "apps/mobile/app/(app)/notes/folder/[id].tsx"
      provides: "Folder contents screen"
    - path: "apps/mobile/app/(app)/notes/[id].tsx"
      provides: "Note editor screen"
    - path: "apps/mobile/src/components/notes/NoteCard.tsx"
      provides: "Note list item component"
  key_links:
    - from: "apps/mobile/app/(app)/notes/index.tsx"
      to: "db/queries"
      via: "useLiveQuery + getFolderContents"
      pattern: "useLiveQuery.*getFolderContents"
    - from: "apps/mobile/app/(app)/notes/[id].tsx"
      to: "src/components/editor/NoteEditor"
      via: "import"
      pattern: "from.*editor"
---

<objective>
Build the note list, folder navigation, and note editor screens using Expo Router.

Purpose: Create the core UI for browsing and editing notes. Users navigate through folders, view note lists, and tap to edit.

Output: Notes index screen, folder view screen, note editor screen, and supporting components (NoteCard, FolderCard, EmptyState).
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-core-note-taking/02-02-SUMMARY.md
@apps/mobile/app/(app)/_layout.tsx
@apps/mobile/db/queries/notes.ts
@apps/mobile/db/queries/folders.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create note and folder card components</name>
  <files>
    apps/mobile/src/components/notes/NoteCard.tsx
    apps/mobile/src/components/notes/FolderCard.tsx
    apps/mobile/src/components/notes/EmptyState.tsx
    apps/mobile/src/components/notes/index.ts
  </files>
  <action>
Create apps/mobile/src/components/notes/NoteCard.tsx:

```typescript
import React from 'react';
import { StyleSheet, Text, TouchableOpacity, View } from 'react-native';
import { Note } from '@/db';

interface NoteCardProps {
  note: Note;
  onPress: () => void;
}

export function NoteCard({ note, onPress }: NoteCardProps) {
  // Get first line of content as preview (strip markdown)
  const preview = note.content
    .split('\n')[0]
    .replace(/[#*`_~\[\]]/g, '')
    .trim()
    .slice(0, 100);

  const formattedDate = new Date(note.updatedAt).toLocaleDateString(undefined, {
    month: 'short',
    day: 'numeric',
  });

  return (
    <TouchableOpacity style={styles.container} onPress={onPress} activeOpacity={0.7}>
      <View style={styles.content}>
        <Text style={styles.title} numberOfLines={1}>
          {note.title || 'Untitled'}
        </Text>
        {preview && (
          <Text style={styles.preview} numberOfLines={2}>
            {preview}
          </Text>
        )}
        <Text style={styles.date}>{formattedDate}</Text>
      </View>
    </TouchableOpacity>
  );
}

const styles = StyleSheet.create({
  container: {
    backgroundColor: '#fff',
    borderRadius: 12,
    padding: 16,
    marginHorizontal: 16,
    marginVertical: 6,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 1 },
    shadowOpacity: 0.05,
    shadowRadius: 2,
    elevation: 1,
  },
  content: {
    gap: 4,
  },
  title: {
    fontSize: 17,
    fontWeight: '600',
    color: '#1a1a1a',
  },
  preview: {
    fontSize: 14,
    color: '#666',
    lineHeight: 20,
  },
  date: {
    fontSize: 12,
    color: '#999',
    marginTop: 4,
  },
});
```

Create apps/mobile/src/components/notes/FolderCard.tsx:

```typescript
import React from 'react';
import { StyleSheet, Text, TouchableOpacity, View } from 'react-native';
import { Folder } from '@/db';

interface FolderCardProps {
  folder: Folder;
  onPress: () => void;
  onLongPress?: () => void;
}

export function FolderCard({ folder, onPress, onLongPress }: FolderCardProps) {
  return (
    <TouchableOpacity
      style={styles.container}
      onPress={onPress}
      onLongPress={onLongPress}
      activeOpacity={0.7}
    >
      <View style={styles.iconContainer}>
        <Text style={styles.icon}>üìÅ</Text>
      </View>
      <Text style={styles.name} numberOfLines={1}>
        {folder.name}
      </Text>
    </TouchableOpacity>
  );
}

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#f8f8f8',
    borderRadius: 12,
    padding: 14,
    marginHorizontal: 16,
    marginVertical: 4,
  },
  iconContainer: {
    marginRight: 12,
  },
  icon: {
    fontSize: 24,
  },
  name: {
    fontSize: 16,
    fontWeight: '500',
    color: '#1a1a1a',
    flex: 1,
  },
});
```

Create apps/mobile/src/components/notes/EmptyState.tsx:

```typescript
import React from 'react';
import { StyleSheet, Text, View } from 'react-native';

interface EmptyStateProps {
  title: string;
  message: string;
}

export function EmptyState({ title, message }: EmptyStateProps) {
  return (
    <View style={styles.container}>
      <Text style={styles.emoji}>üìù</Text>
      <Text style={styles.title}>{title}</Text>
      <Text style={styles.message}>{message}</Text>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    padding: 32,
  },
  emoji: {
    fontSize: 48,
    marginBottom: 16,
  },
  title: {
    fontSize: 20,
    fontWeight: '600',
    color: '#1a1a1a',
    marginBottom: 8,
    textAlign: 'center',
  },
  message: {
    fontSize: 15,
    color: '#666',
    textAlign: 'center',
    lineHeight: 22,
  },
});
```

Create apps/mobile/src/components/notes/index.ts:
```typescript
export { NoteCard } from './NoteCard';
export { FolderCard } from './FolderCard';
export { EmptyState } from './EmptyState';
```
  </action>
  <verify>
Run `pnpm --filter @k7notes/mobile type-check` passes.
  </verify>
  <done>NoteCard, FolderCard, EmptyState components created</done>
</task>

<task type="auto">
  <name>Task 2: Create notes list and folder navigation screens</name>
  <files>
    apps/mobile/app/(app)/notes/index.tsx
    apps/mobile/app/(app)/notes/folder/[id].tsx
    apps/mobile/app/(app)/notes/new.tsx
    apps/mobile/app/(app)/_layout.tsx
  </files>
  <action>
Create apps/mobile/app/(app)/notes/index.tsx (root notes list):

```typescript
import React, { useState } from 'react';
import {
  StyleSheet,
  View,
  FlatList,
  TouchableOpacity,
  Text,
  Alert,
  TextInput,
  Modal,
} from 'react-native';
import { router } from 'expo-router';
import { useLiveQuery, getFolderContents, createNote, createFolder } from '@/db';
import { NoteCard, FolderCard, EmptyState } from '@/components/notes';

export default function NotesIndexScreen() {
  const { data, loading } = useLiveQuery(() => getFolderContents(null), []);
  const [showNewFolderModal, setShowNewFolderModal] = useState(false);
  const [newFolderName, setNewFolderName] = useState('');

  const handleCreateNote = async () => {
    const note = await createNote({ title: 'Untitled', content: '' });
    router.push(`/notes/${note.id}`);
  };

  const handleCreateFolder = async () => {
    if (!newFolderName.trim()) return;
    await createFolder({ name: newFolderName.trim() });
    setNewFolderName('');
    setShowNewFolderModal(false);
  };

  const handleNotePress = (noteId: string) => {
    router.push(`/notes/${noteId}`);
  };

  const handleFolderPress = (folderId: string) => {
    router.push(`/notes/folder/${folderId}`);
  };

  if (loading) {
    return (
      <View style={styles.loading}>
        <Text>Loading...</Text>
      </View>
    );
  }

  const isEmpty = !data?.folders.length && !data?.notes.length;

  return (
    <View style={styles.container}>
      {isEmpty ? (
        <EmptyState
          title="No notes yet"
          message="Tap the + button to create your first note"
        />
      ) : (
        <FlatList
          data={[
            ...(data?.folders.map((f) => ({ type: 'folder' as const, item: f })) ?? []),
            ...(data?.notes.map((n) => ({ type: 'note' as const, item: n })) ?? []),
          ]}
          keyExtractor={(item) => item.item.id}
          renderItem={({ item }) =>
            item.type === 'folder' ? (
              <FolderCard
                folder={item.item}
                onPress={() => handleFolderPress(item.item.id)}
              />
            ) : (
              <NoteCard note={item.item} onPress={() => handleNotePress(item.item.id)} />
            )
          }
          contentContainerStyle={styles.list}
        />
      )}

      {/* FAB Menu */}
      <View style={styles.fabContainer}>
        <TouchableOpacity
          style={[styles.fab, styles.fabSecondary]}
          onPress={() => setShowNewFolderModal(true)}
        >
          <Text style={styles.fabIcon}>üìÅ</Text>
        </TouchableOpacity>
        <TouchableOpacity style={styles.fab} onPress={handleCreateNote}>
          <Text style={styles.fabIcon}>‚úèÔ∏è</Text>
        </TouchableOpacity>
      </View>

      {/* New Folder Modal */}
      <Modal visible={showNewFolderModal} transparent animationType="fade">
        <View style={styles.modalOverlay}>
          <View style={styles.modalContent}>
            <Text style={styles.modalTitle}>New Folder</Text>
            <TextInput
              style={styles.modalInput}
              placeholder="Folder name"
              value={newFolderName}
              onChangeText={setNewFolderName}
              autoFocus
            />
            <View style={styles.modalButtons}>
              <TouchableOpacity
                style={styles.modalButton}
                onPress={() => setShowNewFolderModal(false)}
              >
                <Text style={styles.modalButtonText}>Cancel</Text>
              </TouchableOpacity>
              <TouchableOpacity
                style={[styles.modalButton, styles.modalButtonPrimary]}
                onPress={handleCreateFolder}
              >
                <Text style={[styles.modalButtonText, styles.modalButtonTextPrimary]}>
                  Create
                </Text>
              </TouchableOpacity>
            </View>
          </View>
        </View>
      </Modal>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f5f5f5',
  },
  loading: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  list: {
    paddingVertical: 8,
  },
  fabContainer: {
    position: 'absolute',
    bottom: 24,
    right: 24,
    gap: 12,
  },
  fab: {
    width: 56,
    height: 56,
    borderRadius: 28,
    backgroundColor: '#007AFF',
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.2,
    shadowRadius: 4,
    elevation: 4,
  },
  fabSecondary: {
    backgroundColor: '#34C759',
  },
  fabIcon: {
    fontSize: 24,
  },
  modalOverlay: {
    flex: 1,
    backgroundColor: 'rgba(0,0,0,0.4)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  modalContent: {
    backgroundColor: '#fff',
    borderRadius: 16,
    padding: 24,
    width: '80%',
    maxWidth: 320,
  },
  modalTitle: {
    fontSize: 18,
    fontWeight: '600',
    marginBottom: 16,
  },
  modalInput: {
    borderWidth: 1,
    borderColor: '#ddd',
    borderRadius: 8,
    padding: 12,
    fontSize: 16,
    marginBottom: 16,
  },
  modalButtons: {
    flexDirection: 'row',
    justifyContent: 'flex-end',
    gap: 12,
  },
  modalButton: {
    paddingVertical: 10,
    paddingHorizontal: 16,
    borderRadius: 8,
  },
  modalButtonPrimary: {
    backgroundColor: '#007AFF',
  },
  modalButtonText: {
    fontSize: 16,
    color: '#666',
  },
  modalButtonTextPrimary: {
    color: '#fff',
    fontWeight: '600',
  },
});
```

Create apps/mobile/app/(app)/notes/folder/[id].tsx (folder contents):

```typescript
import React, { useState } from 'react';
import {
  StyleSheet,
  View,
  FlatList,
  TouchableOpacity,
  Text,
  TextInput,
  Modal,
} from 'react-native';
import { router, useLocalSearchParams, Stack } from 'expo-router';
import {
  useLiveQuery,
  getFolderContents,
  getFolder,
  getFolderPath,
  createNote,
  createFolder,
} from '@/db';
import { NoteCard, FolderCard, EmptyState } from '@/components/notes';

export default function FolderScreen() {
  const { id } = useLocalSearchParams<{ id: string }>();
  const { data: contents, loading } = useLiveQuery(() => getFolderContents(id), [id]);
  const { data: folder } = useLiveQuery(() => getFolder(id), [id]);
  const { data: path } = useLiveQuery(() => getFolderPath(id), [id]);

  const [showNewFolderModal, setShowNewFolderModal] = useState(false);
  const [newFolderName, setNewFolderName] = useState('');

  const handleCreateNote = async () => {
    const note = await createNote({ title: 'Untitled', content: '', folderId: id });
    router.push(`/notes/${note.id}`);
  };

  const handleCreateFolder = async () => {
    if (!newFolderName.trim()) return;
    await createFolder({ name: newFolderName.trim(), parentId: id });
    setNewFolderName('');
    setShowNewFolderModal(false);
  };

  const handleNotePress = (noteId: string) => {
    router.push(`/notes/${noteId}`);
  };

  const handleFolderPress = (folderId: string) => {
    router.push(`/notes/folder/${folderId}`);
  };

  if (loading) {
    return (
      <View style={styles.loading}>
        <Text>Loading...</Text>
      </View>
    );
  }

  const isEmpty = !contents?.folders.length && !contents?.notes.length;

  return (
    <>
      <Stack.Screen options={{ title: folder?.name ?? 'Folder' }} />
      <View style={styles.container}>
        {/* Breadcrumb */}
        {path && path.length > 1 && (
          <View style={styles.breadcrumb}>
            <TouchableOpacity onPress={() => router.push('/notes')}>
              <Text style={styles.breadcrumbLink}>Notes</Text>
            </TouchableOpacity>
            {path.slice(0, -1).map((f) => (
              <React.Fragment key={f.id}>
                <Text style={styles.breadcrumbSep}>/</Text>
                <TouchableOpacity onPress={() => router.push(`/notes/folder/${f.id}`)}>
                  <Text style={styles.breadcrumbLink}>{f.name}</Text>
                </TouchableOpacity>
              </React.Fragment>
            ))}
          </View>
        )}

        {isEmpty ? (
          <EmptyState
            title="Empty folder"
            message="Tap the + button to add a note or subfolder"
          />
        ) : (
          <FlatList
            data={[
              ...(contents?.folders.map((f) => ({ type: 'folder' as const, item: f })) ?? []),
              ...(contents?.notes.map((n) => ({ type: 'note' as const, item: n })) ?? []),
            ]}
            keyExtractor={(item) => item.item.id}
            renderItem={({ item }) =>
              item.type === 'folder' ? (
                <FolderCard
                  folder={item.item}
                  onPress={() => handleFolderPress(item.item.id)}
                />
              ) : (
                <NoteCard note={item.item} onPress={() => handleNotePress(item.item.id)} />
              )
            }
            contentContainerStyle={styles.list}
          />
        )}

        {/* FAB Menu */}
        <View style={styles.fabContainer}>
          <TouchableOpacity
            style={[styles.fab, styles.fabSecondary]}
            onPress={() => setShowNewFolderModal(true)}
          >
            <Text style={styles.fabIcon}>üìÅ</Text>
          </TouchableOpacity>
          <TouchableOpacity style={styles.fab} onPress={handleCreateNote}>
            <Text style={styles.fabIcon}>‚úèÔ∏è</Text>
          </TouchableOpacity>
        </View>

        {/* New Folder Modal */}
        <Modal visible={showNewFolderModal} transparent animationType="fade">
          <View style={styles.modalOverlay}>
            <View style={styles.modalContent}>
              <Text style={styles.modalTitle}>New Folder</Text>
              <TextInput
                style={styles.modalInput}
                placeholder="Folder name"
                value={newFolderName}
                onChangeText={setNewFolderName}
                autoFocus
              />
              <View style={styles.modalButtons}>
                <TouchableOpacity
                  style={styles.modalButton}
                  onPress={() => setShowNewFolderModal(false)}
                >
                  <Text style={styles.modalButtonText}>Cancel</Text>
                </TouchableOpacity>
                <TouchableOpacity
                  style={[styles.modalButton, styles.modalButtonPrimary]}
                  onPress={handleCreateFolder}
                >
                  <Text style={[styles.modalButtonText, styles.modalButtonTextPrimary]}>
                    Create
                  </Text>
                </TouchableOpacity>
              </View>
            </View>
          </View>
        </Modal>
      </View>
    </>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f5f5f5',
  },
  loading: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  breadcrumb: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingHorizontal: 16,
    paddingVertical: 8,
    backgroundColor: '#fff',
    borderBottomWidth: 1,
    borderBottomColor: '#eee',
  },
  breadcrumbLink: {
    fontSize: 14,
    color: '#007AFF',
  },
  breadcrumbSep: {
    fontSize: 14,
    color: '#999',
    marginHorizontal: 6,
  },
  list: {
    paddingVertical: 8,
  },
  fabContainer: {
    position: 'absolute',
    bottom: 24,
    right: 24,
    gap: 12,
  },
  fab: {
    width: 56,
    height: 56,
    borderRadius: 28,
    backgroundColor: '#007AFF',
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.2,
    shadowRadius: 4,
    elevation: 4,
  },
  fabSecondary: {
    backgroundColor: '#34C759',
  },
  fabIcon: {
    fontSize: 24,
  },
  modalOverlay: {
    flex: 1,
    backgroundColor: 'rgba(0,0,0,0.4)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  modalContent: {
    backgroundColor: '#fff',
    borderRadius: 16,
    padding: 24,
    width: '80%',
    maxWidth: 320,
  },
  modalTitle: {
    fontSize: 18,
    fontWeight: '600',
    marginBottom: 16,
  },
  modalInput: {
    borderWidth: 1,
    borderColor: '#ddd',
    borderRadius: 8,
    padding: 12,
    fontSize: 16,
    marginBottom: 16,
  },
  modalButtons: {
    flexDirection: 'row',
    justifyContent: 'flex-end',
    gap: 12,
  },
  modalButton: {
    paddingVertical: 10,
    paddingHorizontal: 16,
    borderRadius: 8,
  },
  modalButtonPrimary: {
    backgroundColor: '#007AFF',
  },
  modalButtonText: {
    fontSize: 16,
    color: '#666',
  },
  modalButtonTextPrimary: {
    color: '#fff',
    fontWeight: '600',
  },
});
```

Update apps/mobile/app/(app)/_layout.tsx to add notes routes:

```typescript
import { Stack } from 'expo-router';

export default function AppLayout() {
  return (
    <Stack
      screenOptions={{
        headerShown: true,
        headerTitleAlign: 'center',
      }}
    >
      <Stack.Screen
        name="home"
        options={{
          title: 'Home',
        }}
      />
      <Stack.Screen
        name="notes/index"
        options={{
          title: 'Notes',
        }}
      />
      <Stack.Screen
        name="notes/[id]"
        options={{
          title: 'Edit Note',
        }}
      />
      <Stack.Screen
        name="notes/folder/[id]"
        options={{
          title: 'Folder',
        }}
      />
      <Stack.Screen
        name="search/index"
        options={{
          title: 'Search',
        }}
      />
    </Stack>
  );
}
```
  </action>
  <verify>
Run `pnpm --filter @k7notes/mobile type-check` passes.
  </verify>
  <done>Notes index, folder view, and app layout updated with routes</done>
</task>

<task type="auto">
  <name>Task 3: Create note editor screen with save/delete</name>
  <files>
    apps/mobile/app/(app)/notes/[id].tsx
  </files>
  <action>
Create apps/mobile/app/(app)/notes/[id].tsx:

```typescript
import React, { useRef, useState, useCallback, useEffect } from 'react';
import {
  StyleSheet,
  View,
  TextInput,
  TouchableOpacity,
  Text,
  Alert,
  ActivityIndicator,
} from 'react-native';
import { router, useLocalSearchParams, Stack } from 'expo-router';
import { useLiveQuery, getNote, updateNote, deleteNote } from '@/db';
import { NoteEditor, NoteEditorRef } from '@/components/editor';

export default function NoteEditorScreen() {
  const { id } = useLocalSearchParams<{ id: string }>();
  const { data: note, loading } = useLiveQuery(() => getNote(id), [id]);
  const editorRef = useRef<NoteEditorRef>(null);

  const [title, setTitle] = useState('');
  const [hasChanges, setHasChanges] = useState(false);
  const [saving, setSaving] = useState(false);

  // Initialize title when note loads
  useEffect(() => {
    if (note) {
      setTitle(note.title);
    }
  }, [note?.id]); // Only update when note ID changes, not on every render

  const handleSave = useCallback(async () => {
    if (!editorRef.current || saving) return;

    setSaving(true);
    try {
      const content = await editorRef.current.getMarkdown();
      await updateNote(id, { title: title || 'Untitled', content });
      setHasChanges(false);
    } catch (err) {
      Alert.alert('Error', 'Failed to save note');
    } finally {
      setSaving(false);
    }
  }, [id, title, saving]);

  const handleDelete = () => {
    Alert.alert(
      'Delete Note',
      'Are you sure you want to delete this note? This cannot be undone.',
      [
        { text: 'Cancel', style: 'cancel' },
        {
          text: 'Delete',
          style: 'destructive',
          onPress: async () => {
            await deleteNote(id);
            router.back();
          },
        },
      ]
    );
  };

  const handleContentChange = useCallback(() => {
    setHasChanges(true);
  }, []);

  const handleTitleChange = (newTitle: string) => {
    setTitle(newTitle);
    setHasChanges(true);
  };

  if (loading || !note) {
    return (
      <View style={styles.loading}>
        <ActivityIndicator size="large" />
      </View>
    );
  }

  return (
    <>
      <Stack.Screen
        options={{
          title: '',
          headerRight: () => (
            <View style={styles.headerButtons}>
              {hasChanges && (
                <TouchableOpacity
                  style={styles.saveButton}
                  onPress={handleSave}
                  disabled={saving}
                >
                  {saving ? (
                    <ActivityIndicator size="small" color="#007AFF" />
                  ) : (
                    <Text style={styles.saveButtonText}>Save</Text>
                  )}
                </TouchableOpacity>
              )}
              <TouchableOpacity style={styles.deleteButton} onPress={handleDelete}>
                <Text style={styles.deleteButtonText}>Delete</Text>
              </TouchableOpacity>
            </View>
          ),
        }}
      />
      <View style={styles.container}>
        <TextInput
          style={styles.titleInput}
          value={title}
          onChangeText={handleTitleChange}
          placeholder="Note title"
          placeholderTextColor="#999"
        />
        <View style={styles.editorContainer}>
          <NoteEditor
            ref={editorRef}
            initialContent={note.content}
            onContentChange={handleContentChange}
          />
        </View>
      </View>
    </>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
  },
  loading: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  headerButtons: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 12,
  },
  saveButton: {
    paddingHorizontal: 12,
    paddingVertical: 6,
  },
  saveButtonText: {
    color: '#007AFF',
    fontSize: 16,
    fontWeight: '600',
  },
  deleteButton: {
    paddingHorizontal: 12,
    paddingVertical: 6,
  },
  deleteButtonText: {
    color: '#FF3B30',
    fontSize: 16,
  },
  titleInput: {
    fontSize: 24,
    fontWeight: '600',
    paddingHorizontal: 16,
    paddingVertical: 12,
    borderBottomWidth: 1,
    borderBottomColor: '#eee',
    color: '#1a1a1a',
  },
  editorContainer: {
    flex: 1,
  },
});
```
  </action>
  <verify>
Run `pnpm --filter @k7notes/mobile type-check` passes.
  </verify>
  <done>
Note editor screen created with:
- Title input at top
- 10tap-editor for content
- Save button (visible when changes exist)
- Delete button with confirmation
- Loading state while note loads
  </done>
</task>

</tasks>

<verification>
1. `pnpm --filter @k7notes/mobile type-check` passes
2. All routes configured in _layout.tsx
3. NoteCard, FolderCard, EmptyState components created
4. Notes index shows root content
5. Folder view shows breadcrumb and contents
6. Note editor integrates with NoteEditor component
</verification>

<success_criteria>
- Notes index screen shows folders and notes at root level
- Folder screen shows contents with breadcrumb navigation
- Note editor screen with title input and 10tap-editor
- Save button appears when content changes
- Delete button with confirmation dialog
- FAB menu for creating notes and folders
- New folder modal for folder creation
- useLiveQuery provides reactive data updates
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-note-taking/02-05-SUMMARY.md`
</output>
