---
phase: 02-core-note-taking
plan: 04
type: execute
wave: 3
depends_on: ["02-02"]
files_modified:
  - apps/mobile/app/(app)/notes/index.tsx
  - apps/mobile/app/(app)/notes/[id].tsx
  - apps/mobile/app/(app)/notes/folder/[id].tsx
  - apps/mobile/app/(app)/notes/_layout.tsx
  - apps/mobile/app/(app)/_layout.tsx
  - apps/mobile/components/notes/NoteCard.tsx
  - apps/mobile/components/notes/NoteList.tsx
  - apps/mobile/components/notes/FolderCard.tsx
  - apps/mobile/components/notes/EmptyState.tsx
autonomous: true

must_haves:
  truths:
    - "User can view list of notes at root level"
    - "User can navigate into folders to see nested content"
    - "User can tap a note to open editor"
    - "User can create new notes"
    - "User can delete notes"
    - "User can create new folders"
  artifacts:
    - path: "apps/mobile/app/(app)/notes/index.tsx"
      provides: "Note list at root level"
      min_lines: 50
    - path: "apps/mobile/app/(app)/notes/[id].tsx"
      provides: "Note editor screen"
      min_lines: 80
    - path: "apps/mobile/app/(app)/notes/folder/[id].tsx"
      provides: "Folder contents view"
      min_lines: 50
    - path: "apps/mobile/components/notes/NoteList.tsx"
      provides: "Reusable note list component"
      min_lines: 40
  key_links:
    - from: "apps/mobile/app/(app)/notes/index.tsx"
      to: "@/db/queries"
      via: "useLiveQuery for notes"
      pattern: "useLiveQuery"
    - from: "apps/mobile/app/(app)/notes/[id].tsx"
      to: "@/db/queries"
      via: "getNote, updateNote, deleteNote"
      pattern: "updateNote|deleteNote"
    - from: "apps/mobile/components/notes/NoteList.tsx"
      to: "apps/mobile/components/notes/NoteCard.tsx"
      via: "FlatList renderItem"
      pattern: "NoteCard"
---

<objective>
Build note list, folder navigation, and note editor screens

Purpose: Create the core UI for browsing and editing notes. Users need to see their notes, navigate folders, create new content, and edit existing notes - all with reactive updates.

Output: Complete navigation flow from home to notes, folder browsing, and note editing with autosave.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-core-note-taking/02-RESEARCH.md

# Query functions from Plan 02
@apps/mobile/db/queries/notes.ts
@apps/mobile/db/queries/folders.ts

# Existing app structure
@apps/mobile/app/(app)/home.tsx
@apps/mobile/app/(app)/_layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create note list components and root notes screen</name>
  <files>
    apps/mobile/components/notes/NoteCard.tsx
    apps/mobile/components/notes/FolderCard.tsx
    apps/mobile/components/notes/NoteList.tsx
    apps/mobile/components/notes/EmptyState.tsx
    apps/mobile/app/(app)/notes/index.tsx
    apps/mobile/app/(app)/notes/_layout.tsx
  </files>
  <action>
Create reusable components in apps/mobile/components/notes/:

**NoteCard.tsx:**
```typescript
import { TouchableOpacity, Text, View, StyleSheet } from "react-native";
import { router } from "expo-router";
import { type Note } from "@/db/queries";

interface NoteCardProps {
  note: Note;
}

export function NoteCard({ note }: NoteCardProps) {
  const preview = note.content.slice(0, 100);
  const formattedDate = note.updatedAt
    ? new Date(note.updatedAt).toLocaleDateString()
    : "";

  return (
    <TouchableOpacity
      style={styles.card}
      onPress={() => router.push(`/notes/${note.id}`)}
    >
      <Text style={styles.title} numberOfLines={1}>{note.title}</Text>
      {preview && (
        <Text style={styles.preview} numberOfLines={2}>{preview}</Text>
      )}
      <Text style={styles.date}>{formattedDate}</Text>
    </TouchableOpacity>
  );
}

const styles = StyleSheet.create({
  card: {
    backgroundColor: "#fff",
    padding: 16,
    borderRadius: 12,
    marginHorizontal: 16,
    marginVertical: 6,
    shadowColor: "#000",
    shadowOffset: { width: 0, height: 1 },
    shadowOpacity: 0.1,
    shadowRadius: 2,
    elevation: 2,
  },
  title: {
    fontSize: 17,
    fontWeight: "600",
    color: "#1a1a1a",
    marginBottom: 4,
  },
  preview: {
    fontSize: 14,
    color: "#666",
    marginBottom: 8,
  },
  date: {
    fontSize: 12,
    color: "#999",
  },
});
```

**FolderCard.tsx:**
```typescript
import { TouchableOpacity, Text, View, StyleSheet } from "react-native";
import { router } from "expo-router";
import { Ionicons } from "@expo/vector-icons";
import { type Folder } from "@/db/queries";

interface FolderCardProps {
  folder: Folder;
  noteCount?: number;
}

export function FolderCard({ folder, noteCount }: FolderCardProps) {
  return (
    <TouchableOpacity
      style={styles.card}
      onPress={() => router.push(`/notes/folder/${folder.id}`)}
    >
      <Ionicons name="folder" size={24} color="#007AFF" />
      <View style={styles.content}>
        <Text style={styles.name}>{folder.name}</Text>
        {noteCount !== undefined && (
          <Text style={styles.count}>{noteCount} notes</Text>
        )}
      </View>
      <Ionicons name="chevron-forward" size={20} color="#C7C7CC" />
    </TouchableOpacity>
  );
}

const styles = StyleSheet.create({
  card: {
    flexDirection: "row",
    alignItems: "center",
    backgroundColor: "#fff",
    padding: 16,
    borderRadius: 12,
    marginHorizontal: 16,
    marginVertical: 6,
    shadowColor: "#000",
    shadowOffset: { width: 0, height: 1 },
    shadowOpacity: 0.1,
    shadowRadius: 2,
    elevation: 2,
  },
  content: {
    flex: 1,
    marginLeft: 12,
  },
  name: {
    fontSize: 17,
    fontWeight: "600",
    color: "#1a1a1a",
  },
  count: {
    fontSize: 14,
    color: "#666",
    marginTop: 2,
  },
});
```

**EmptyState.tsx:**
```typescript
import { View, Text, StyleSheet } from "react-native";
import { Ionicons } from "@expo/vector-icons";

interface EmptyStateProps {
  icon: keyof typeof Ionicons.glyphMap;
  title: string;
  subtitle?: string;
}

export function EmptyState({ icon, title, subtitle }: EmptyStateProps) {
  return (
    <View style={styles.container}>
      <Ionicons name={icon} size={48} color="#C7C7CC" />
      <Text style={styles.title}>{title}</Text>
      {subtitle && <Text style={styles.subtitle}>{subtitle}</Text>}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: "center",
    alignItems: "center",
    padding: 32,
  },
  title: {
    fontSize: 18,
    fontWeight: "600",
    color: "#666",
    marginTop: 16,
  },
  subtitle: {
    fontSize: 14,
    color: "#999",
    marginTop: 8,
    textAlign: "center",
  },
});
```

**NoteList.tsx:**
```typescript
import { FlatList, View, StyleSheet } from "react-native";
import { useLiveQuery } from "drizzle-orm/expo-sqlite";
import { eq, isNull, desc } from "drizzle-orm";
import { db } from "@/db/client";
import { notes, folders } from "@/db/schema";
import { NoteCard } from "./NoteCard";
import { FolderCard } from "./FolderCard";
import { EmptyState } from "./EmptyState";
import { type Note, type Folder } from "@/db/queries";

interface NoteListProps {
  folderId?: number | null;
}

export function NoteList({ folderId }: NoteListProps) {
  // Query folders at this level
  const { data: folderList } = useLiveQuery(
    db.select().from(folders)
      .where(folderId ? eq(folders.parentId, folderId) : isNull(folders.parentId))
  );

  // Query notes at this level
  const { data: noteList } = useLiveQuery(
    db.select().from(notes)
      .where(folderId ? eq(notes.folderId, folderId) : isNull(notes.folderId))
      .orderBy(desc(notes.updatedAt))
  );

  const isEmpty = !folderList?.length && !noteList?.length;

  if (isEmpty) {
    return (
      <EmptyState
        icon="document-text-outline"
        title="No notes yet"
        subtitle="Tap + to create your first note"
      />
    );
  }

  // Combine folders and notes for single list
  const items: Array<{ type: "folder"; data: Folder } | { type: "note"; data: Note }> = [
    ...(folderList || []).map(f => ({ type: "folder" as const, data: f })),
    ...(noteList || []).map(n => ({ type: "note" as const, data: n })),
  ];

  return (
    <FlatList
      data={items}
      renderItem={({ item }) =>
        item.type === "folder" ? (
          <FolderCard folder={item.data} />
        ) : (
          <NoteCard note={item.data} />
        )
      }
      keyExtractor={(item) => `${item.type}-${item.data.id}`}
      contentContainerStyle={styles.list}
    />
  );
}

const styles = StyleSheet.create({
  list: {
    paddingVertical: 8,
  },
});
```

**apps/mobile/app/(app)/notes/_layout.tsx:**
```typescript
import { Stack } from "expo-router";

export default function NotesLayout() {
  return (
    <Stack screenOptions={{ headerShown: true }}>
      <Stack.Screen name="index" options={{ title: "Notes" }} />
      <Stack.Screen name="[id]" options={{ title: "Edit Note" }} />
      <Stack.Screen name="folder/[id]" options={{ title: "Folder" }} />
    </Stack>
  );
}
```

**apps/mobile/app/(app)/notes/index.tsx:**
```typescript
import { useState } from "react";
import { View, StyleSheet, TouchableOpacity, Alert, TextInput, Modal, Text } from "react-native";
import { Ionicons } from "@expo/vector-icons";
import { router } from "expo-router";
import { NoteList } from "@/components/notes/NoteList";
import { createNote, createFolder } from "@/db/queries";

export default function NotesScreen() {
  const [showNewMenu, setShowNewMenu] = useState(false);
  const [showFolderModal, setShowFolderModal] = useState(false);
  const [folderName, setFolderName] = useState("");

  const handleNewNote = async () => {
    setShowNewMenu(false);
    const note = await createNote({ title: "Untitled Note" });
    router.push(`/notes/${note.id}`);
  };

  const handleNewFolder = async () => {
    if (!folderName.trim()) return;
    await createFolder({ name: folderName.trim() });
    setFolderName("");
    setShowFolderModal(false);
  };

  return (
    <View style={styles.container}>
      <NoteList folderId={null} />

      {/* FAB Menu */}
      <TouchableOpacity
        style={styles.fab}
        onPress={() => setShowNewMenu(true)}
      >
        <Ionicons name="add" size={28} color="#fff" />
      </TouchableOpacity>

      {/* New Item Modal */}
      <Modal visible={showNewMenu} transparent animationType="fade">
        <TouchableOpacity
          style={styles.modalOverlay}
          onPress={() => setShowNewMenu(false)}
        >
          <View style={styles.menuContainer}>
            <TouchableOpacity style={styles.menuItem} onPress={handleNewNote}>
              <Ionicons name="document-text" size={24} color="#007AFF" />
              <Text style={styles.menuText}>New Note</Text>
            </TouchableOpacity>
            <TouchableOpacity
              style={styles.menuItem}
              onPress={() => {
                setShowNewMenu(false);
                setShowFolderModal(true);
              }}
            >
              <Ionicons name="folder" size={24} color="#007AFF" />
              <Text style={styles.menuText}>New Folder</Text>
            </TouchableOpacity>
          </View>
        </TouchableOpacity>
      </Modal>

      {/* New Folder Modal */}
      <Modal visible={showFolderModal} transparent animationType="slide">
        <View style={styles.modalOverlay}>
          <View style={styles.folderModalContent}>
            <Text style={styles.modalTitle}>New Folder</Text>
            <TextInput
              style={styles.input}
              placeholder="Folder name"
              value={folderName}
              onChangeText={setFolderName}
              autoFocus
            />
            <View style={styles.modalButtons}>
              <TouchableOpacity
                style={styles.modalButton}
                onPress={() => {
                  setFolderName("");
                  setShowFolderModal(false);
                }}
              >
                <Text style={styles.cancelText}>Cancel</Text>
              </TouchableOpacity>
              <TouchableOpacity
                style={[styles.modalButton, styles.createButton]}
                onPress={handleNewFolder}
              >
                <Text style={styles.createText}>Create</Text>
              </TouchableOpacity>
            </View>
          </View>
        </View>
      </Modal>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, backgroundColor: "#F2F2F7" },
  fab: {
    position: "absolute",
    right: 20,
    bottom: 20,
    width: 56,
    height: 56,
    borderRadius: 28,
    backgroundColor: "#007AFF",
    justifyContent: "center",
    alignItems: "center",
    shadowColor: "#000",
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.25,
    shadowRadius: 4,
    elevation: 5,
  },
  modalOverlay: {
    flex: 1,
    backgroundColor: "rgba(0,0,0,0.4)",
    justifyContent: "flex-end",
  },
  menuContainer: {
    backgroundColor: "#fff",
    borderTopLeftRadius: 16,
    borderTopRightRadius: 16,
    padding: 20,
  },
  menuItem: {
    flexDirection: "row",
    alignItems: "center",
    paddingVertical: 16,
  },
  menuText: {
    fontSize: 17,
    marginLeft: 12,
    color: "#1a1a1a",
  },
  folderModalContent: {
    backgroundColor: "#fff",
    borderTopLeftRadius: 16,
    borderTopRightRadius: 16,
    padding: 20,
  },
  modalTitle: {
    fontSize: 18,
    fontWeight: "600",
    marginBottom: 16,
  },
  input: {
    backgroundColor: "#F2F2F7",
    borderRadius: 10,
    padding: 14,
    fontSize: 16,
    marginBottom: 16,
  },
  modalButtons: {
    flexDirection: "row",
    justifyContent: "flex-end",
    gap: 12,
  },
  modalButton: {
    paddingVertical: 10,
    paddingHorizontal: 20,
  },
  createButton: {
    backgroundColor: "#007AFF",
    borderRadius: 8,
  },
  cancelText: {
    color: "#666",
    fontSize: 16,
  },
  createText: {
    color: "#fff",
    fontSize: 16,
    fontWeight: "600",
  },
});
```

Also install @expo/vector-icons if not present (usually included with Expo but verify):
```bash
npx expo install @expo/vector-icons
```
  </action>
  <verify>
- All component files exist in apps/mobile/components/notes/
- apps/mobile/app/(app)/notes/index.tsx exists
- apps/mobile/app/(app)/notes/_layout.tsx exists
- App compiles: `cd apps/mobile && pnpm exec tsc --noEmit`
- Navigating to /notes shows the note list screen
- FAB button appears and tapping shows menu
- Creating a note navigates to editor (even if editor is empty)
  </verify>
  <done>Note list and folder UI components ready, root notes screen functional with create actions</done>
</task>

<task type="auto">
  <name>Task 2: Create note editor screen with autosave</name>
  <files>
    apps/mobile/app/(app)/notes/[id].tsx
  </files>
  <action>
Create apps/mobile/app/(app)/notes/[id].tsx for editing notes:

```typescript
import { useState, useEffect, useCallback, useRef } from "react";
import {
  View,
  TextInput,
  StyleSheet,
  Alert,
  KeyboardAvoidingView,
  Platform,
  ScrollView,
  TouchableOpacity,
} from "react-native";
import { Stack, router, useLocalSearchParams } from "expo-router";
import { Ionicons } from "@expo/vector-icons";
import { useLiveQuery } from "drizzle-orm/expo-sqlite";
import { eq } from "drizzle-orm";
import { db } from "@/db/client";
import { notes } from "@/db/schema";
import { updateNote, deleteNote } from "@/db/queries";

export default function NoteEditorScreen() {
  const { id } = useLocalSearchParams<{ id: string }>();
  const noteId = parseInt(id, 10);

  // Live query for note data
  const { data } = useLiveQuery(
    db.select().from(notes).where(eq(notes.id, noteId))
  );
  const note = data?.[0];

  // Local state for editing
  const [title, setTitle] = useState("");
  const [content, setContent] = useState("");
  const [hasChanges, setHasChanges] = useState(false);

  // Debounce timer ref
  const saveTimeoutRef = useRef<NodeJS.Timeout>();

  // Initialize local state from note data
  useEffect(() => {
    if (note) {
      setTitle(note.title);
      setContent(note.content);
    }
  }, [note?.id]); // Only reinitialize on note change, not every update

  // Debounced autosave
  const saveChanges = useCallback(async () => {
    if (!note) return;

    await updateNote(noteId, {
      title: title || "Untitled Note",
      content,
    });
    setHasChanges(false);
  }, [noteId, title, content, note]);

  // Trigger autosave on changes
  useEffect(() => {
    if (!hasChanges || !note) return;

    // Clear existing timeout
    if (saveTimeoutRef.current) {
      clearTimeout(saveTimeoutRef.current);
    }

    // Set new timeout for autosave (1 second debounce)
    saveTimeoutRef.current = setTimeout(() => {
      saveChanges();
    }, 1000);

    return () => {
      if (saveTimeoutRef.current) {
        clearTimeout(saveTimeoutRef.current);
      }
    };
  }, [hasChanges, title, content, saveChanges, note]);

  // Save immediately when navigating away
  useEffect(() => {
    return () => {
      if (hasChanges && saveTimeoutRef.current) {
        clearTimeout(saveTimeoutRef.current);
        // Note: Can't await here, but the update is atomic
        updateNote(noteId, {
          title: title || "Untitled Note",
          content,
        });
      }
    };
  }, [hasChanges, noteId, title, content]);

  const handleTitleChange = (text: string) => {
    setTitle(text);
    setHasChanges(true);
  };

  const handleContentChange = (text: string) => {
    setContent(text);
    setHasChanges(true);
  };

  const handleDelete = () => {
    Alert.alert(
      "Delete Note",
      "Are you sure you want to delete this note? This cannot be undone.",
      [
        { text: "Cancel", style: "cancel" },
        {
          text: "Delete",
          style: "destructive",
          onPress: async () => {
            await deleteNote(noteId);
            router.back();
          },
        },
      ]
    );
  };

  if (!note) {
    return null; // Or loading state
  }

  return (
    <>
      <Stack.Screen
        options={{
          title: "",
          headerRight: () => (
            <TouchableOpacity onPress={handleDelete} style={styles.deleteButton}>
              <Ionicons name="trash-outline" size={24} color="#FF3B30" />
            </TouchableOpacity>
          ),
        }}
      />
      <KeyboardAvoidingView
        style={styles.container}
        behavior={Platform.OS === "ios" ? "padding" : undefined}
        keyboardVerticalOffset={100}
      >
        <ScrollView
          style={styles.scrollView}
          keyboardShouldPersistTaps="handled"
        >
          <TextInput
            style={styles.titleInput}
            placeholder="Note title"
            placeholderTextColor="#999"
            value={title}
            onChangeText={handleTitleChange}
            returnKeyType="next"
          />
          <TextInput
            style={styles.contentInput}
            placeholder="Start writing..."
            placeholderTextColor="#999"
            value={content}
            onChangeText={handleContentChange}
            multiline
            textAlignVertical="top"
          />
        </ScrollView>
      </KeyboardAvoidingView>
    </>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "#fff",
  },
  scrollView: {
    flex: 1,
  },
  titleInput: {
    fontSize: 24,
    fontWeight: "bold",
    padding: 16,
    paddingBottom: 8,
    color: "#1a1a1a",
  },
  contentInput: {
    flex: 1,
    fontSize: 16,
    lineHeight: 24,
    padding: 16,
    paddingTop: 8,
    color: "#1a1a1a",
    minHeight: 300,
  },
  deleteButton: {
    padding: 8,
  },
});
```
  </action>
  <verify>
- apps/mobile/app/(app)/notes/[id].tsx exists
- Navigating to /notes/1 (with a valid note ID) shows the editor
- Typing in title or content triggers autosave after 1 second pause
- Delete button in header works with confirmation dialog
- Back navigation saves any pending changes
- TypeScript compiles: `cd apps/mobile && pnpm exec tsc --noEmit`
  </verify>
  <done>Note editor with autosave, delete functionality, and keyboard handling ready</done>
</task>

<task type="auto">
  <name>Task 3: Create folder contents screen and navigation integration</name>
  <files>
    apps/mobile/app/(app)/notes/folder/[id].tsx
    apps/mobile/app/(app)/_layout.tsx
    apps/mobile/app/(app)/home.tsx
  </files>
  <action>
Create apps/mobile/app/(app)/notes/folder/[id].tsx:

```typescript
import { useState } from "react";
import { View, StyleSheet, TouchableOpacity, Modal, Text, TextInput } from "react-native";
import { Stack, router, useLocalSearchParams } from "expo-router";
import { Ionicons } from "@expo/vector-icons";
import { useLiveQuery } from "drizzle-orm/expo-sqlite";
import { eq } from "drizzle-orm";
import { db } from "@/db/client";
import { folders } from "@/db/schema";
import { NoteList } from "@/components/notes/NoteList";
import { createNote, createFolder } from "@/db/queries";

export default function FolderScreen() {
  const { id } = useLocalSearchParams<{ id: string }>();
  const folderId = parseInt(id, 10);

  // Get folder info
  const { data } = useLiveQuery(
    db.select().from(folders).where(eq(folders.id, folderId))
  );
  const folder = data?.[0];

  const [showNewMenu, setShowNewMenu] = useState(false);
  const [showFolderModal, setShowFolderModal] = useState(false);
  const [folderName, setFolderName] = useState("");

  const handleNewNote = async () => {
    setShowNewMenu(false);
    const note = await createNote({ title: "Untitled Note", folderId });
    router.push(`/notes/${note.id}`);
  };

  const handleNewFolder = async () => {
    if (!folderName.trim()) return;
    await createFolder({ name: folderName.trim(), parentId: folderId });
    setFolderName("");
    setShowFolderModal(false);
  };

  if (!folder) {
    return null;
  }

  return (
    <>
      <Stack.Screen options={{ title: folder.name }} />
      <View style={styles.container}>
        <NoteList folderId={folderId} />

        {/* FAB Menu */}
        <TouchableOpacity
          style={styles.fab}
          onPress={() => setShowNewMenu(true)}
        >
          <Ionicons name="add" size={28} color="#fff" />
        </TouchableOpacity>

        {/* New Item Modal */}
        <Modal visible={showNewMenu} transparent animationType="fade">
          <TouchableOpacity
            style={styles.modalOverlay}
            onPress={() => setShowNewMenu(false)}
          >
            <View style={styles.menuContainer}>
              <TouchableOpacity style={styles.menuItem} onPress={handleNewNote}>
                <Ionicons name="document-text" size={24} color="#007AFF" />
                <Text style={styles.menuText}>New Note</Text>
              </TouchableOpacity>
              <TouchableOpacity
                style={styles.menuItem}
                onPress={() => {
                  setShowNewMenu(false);
                  setShowFolderModal(true);
                }}
              >
                <Ionicons name="folder" size={24} color="#007AFF" />
                <Text style={styles.menuText}>New Folder</Text>
              </TouchableOpacity>
            </View>
          </TouchableOpacity>
        </Modal>

        {/* New Folder Modal */}
        <Modal visible={showFolderModal} transparent animationType="slide">
          <View style={styles.modalOverlay}>
            <View style={styles.folderModalContent}>
              <Text style={styles.modalTitle}>New Folder</Text>
              <TextInput
                style={styles.input}
                placeholder="Folder name"
                value={folderName}
                onChangeText={setFolderName}
                autoFocus
              />
              <View style={styles.modalButtons}>
                <TouchableOpacity
                  style={styles.modalButton}
                  onPress={() => {
                    setFolderName("");
                    setShowFolderModal(false);
                  }}
                >
                  <Text style={styles.cancelText}>Cancel</Text>
                </TouchableOpacity>
                <TouchableOpacity
                  style={[styles.modalButton, styles.createButton]}
                  onPress={handleNewFolder}
                >
                  <Text style={styles.createText}>Create</Text>
                </TouchableOpacity>
              </View>
            </View>
          </View>
        </Modal>
      </View>
    </>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, backgroundColor: "#F2F2F7" },
  fab: {
    position: "absolute",
    right: 20,
    bottom: 20,
    width: 56,
    height: 56,
    borderRadius: 28,
    backgroundColor: "#007AFF",
    justifyContent: "center",
    alignItems: "center",
    shadowColor: "#000",
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.25,
    shadowRadius: 4,
    elevation: 5,
  },
  modalOverlay: {
    flex: 1,
    backgroundColor: "rgba(0,0,0,0.4)",
    justifyContent: "flex-end",
  },
  menuContainer: {
    backgroundColor: "#fff",
    borderTopLeftRadius: 16,
    borderTopRightRadius: 16,
    padding: 20,
  },
  menuItem: {
    flexDirection: "row",
    alignItems: "center",
    paddingVertical: 16,
  },
  menuText: {
    fontSize: 17,
    marginLeft: 12,
    color: "#1a1a1a",
  },
  folderModalContent: {
    backgroundColor: "#fff",
    borderTopLeftRadius: 16,
    borderTopRightRadius: 16,
    padding: 20,
  },
  modalTitle: {
    fontSize: 18,
    fontWeight: "600",
    marginBottom: 16,
  },
  input: {
    backgroundColor: "#F2F2F7",
    borderRadius: 10,
    padding: 14,
    fontSize: 16,
    marginBottom: 16,
  },
  modalButtons: {
    flexDirection: "row",
    justifyContent: "flex-end",
    gap: 12,
  },
  modalButton: {
    paddingVertical: 10,
    paddingHorizontal: 20,
  },
  createButton: {
    backgroundColor: "#007AFF",
    borderRadius: 8,
  },
  cancelText: {
    color: "#666",
    fontSize: 16,
  },
  createText: {
    color: "#fff",
    fontSize: 16,
    fontWeight: "600",
  },
});
```

Update apps/mobile/app/(app)/_layout.tsx to include notes routes:

```typescript
import { Stack } from "expo-router";

export default function AppLayout() {
  return (
    <Stack screenOptions={{ headerShown: false }}>
      <Stack.Screen name="home" />
      <Stack.Screen name="notes" />
    </Stack>
  );
}
```

Update apps/mobile/app/(app)/home.tsx to add navigation to notes:

Add a "View Notes" button or replace the placeholder with navigation to notes:

```typescript
// In the placeholder section, add:
<TouchableOpacity
  style={styles.notesButton}
  onPress={() => router.push("/notes")}
>
  <Ionicons name="document-text" size={24} color="#007AFF" />
  <Text style={styles.notesButtonText}>View Notes</Text>
</TouchableOpacity>

// Add to StyleSheet:
notesButton: {
  flexDirection: "row",
  alignItems: "center",
  backgroundColor: "#F2F2F7",
  paddingVertical: 16,
  paddingHorizontal: 24,
  borderRadius: 12,
  marginTop: 16,
},
notesButtonText: {
  fontSize: 17,
  color: "#007AFF",
  marginLeft: 12,
  fontWeight: "600",
},
```

Also add required imports to home.tsx:
```typescript
import { Ionicons } from "@expo/vector-icons";
import { router } from "expo-router";
```
  </action>
  <verify>
- apps/mobile/app/(app)/notes/folder/[id].tsx exists
- Navigating to folder shows its contents
- Creating notes inside folder assigns correct folderId
- Creating nested folders assigns correct parentId
- Home screen has button to navigate to notes
- Full navigation flow works: Home -> Notes -> Folder -> Note Editor
- TypeScript compiles: `cd apps/mobile && pnpm exec tsc --noEmit`
  </verify>
  <done>Folder view and navigation integration complete, full browse/edit flow functional</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Navigation Flow:**
   - Home screen -> "View Notes" -> Notes list
   - Notes list -> tap folder -> Folder contents
   - Folder contents -> tap note -> Note editor
   - Back navigation works at each level

2. **Note Operations:**
   - Create note at root level (appears in list)
   - Create note in folder (appears in folder view)
   - Edit note title and content (autosaves)
   - Delete note (disappears from list)

3. **Folder Operations:**
   - Create folder at root level
   - Create folder inside folder (nested)
   - Folder shows note count
   - Folder name shows in header when viewing

4. **Reactive Updates:**
   - Create note in one view, appears immediately
   - Delete note, disappears immediately
   - useLiveQuery updates without refresh

5. **Build Check:**
   - `cd apps/mobile && pnpm exec tsc --noEmit` passes
   - App runs without console errors
</verification>

<success_criteria>
- Note list shows folders and notes at current level
- Folder navigation with breadcrumb-style back
- Note editor with title and content fields
- Autosave with 1-second debounce
- Delete note with confirmation
- Create note and folder from FAB menu
- Empty state when no content
- Reactive updates via useLiveQuery
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-note-taking/02-04-SUMMARY.md`
</output>
